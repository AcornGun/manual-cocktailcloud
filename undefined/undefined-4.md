# 통합 모니터링

## 어떤 유형의 자원을 모니터링 할 수 있나요?

칵테일 클라우드는 멀티클러스터 환경에서 발생하는 자원과 상태에 대한 200여개의 매트릭값을 활용하여 100여개의 모니터링 패널을 제공합니다. 

각각의 패널은 클러스터, 인그레스, ETCD, 노드, 네임스페이스 뷰 배치하여 제공합니다. 또한, 알람/이벤트 페이지를 추가로 제공하며, 발생한 알람/이벤트에 대하여 시간순으로 확인하고 사용자 플랫폼 현황의 가시화를 극대화 합니다.

## 모니터링 정보는 어디에서 확인 할 수 있나요?

칵테일 클라드 모니터링 정보는 ←대시보드 메뉴에서 확인 할 수 있습니다. 하위 메뉴로는 클러스터, 인그레스, ETCD, 노드, 네임스페이스, 알림/이벤트 가능을 제공합니다.

![\[&#xD654;&#xBA74;\] &#xD1B5;&#xD569; &#xBAA8;&#xB2C8;&#xD130;&#xB9C1; &#xB300;&#xC2DC;&#xBCF4;&#xB4DC; &#xBA54;&#xC778;](../.gitbook/assets/2020-10-20-1.28.45.png)

## 클러스터 상태는 어떻게 확인하기

클러스터 단위로 최신의 상태 정보를 제공합니다. 클러스터 뷰에서 대표적으로 제공되는 상태 정보는 아래와 같습니다.

> * 현재 연결 수 총계
> * CPU 사용량
> * 디스크 사용량 
> * 디스크 I/Os
> * 메모리 사용량
> * 리스타트 된 Pod 추적
> * 초당 평균 요청 시간
> * 실행 중인 Pod 추이
> * Top 5 CPU 집중  사용 Pod
> * Top 5 메모리 집중 사용 Pod

![\[&#xD654;&#xBA74;\] &#xD074;&#xB7EC;&#xC2A4;&#xD130; &#xBAA8;&#xB2C8;&#xD130;&#xB9C1;](../.gitbook/assets/2020-10-20-1.54.52.png)

## 인그레스 상태 확인 하기

인그레스는 클러스터 외부에서 클러스터 내부 서비스로 HTTP와 HTTPS 경로를 노출합니다. 인그레스는 외부에서 서비스로 접속이 가능한 URL, 로드 밸런스 트래픽, SSL / TLS 종료 그리고 이름 기반의 가상 호스팅을 제공하도록 구성할 수 있습니다. 인그레스는 서비스에서 네트워크 영역에 중요한 역할을 담당하고 있어 다각도의 모니터링이 필수입니다.

통합대시보드의 인그레스 뷰에서 제공되는 상태 정보는 아래와 같습니다.

> * 인그레스 컨트롤러 요청 
> * 인그레스 컨트롤러 연결
> * 인그레스 컨트롤러 요청 성공률
> * 최근 인그레스 설정 리로드 성공 및 실패
> * 인그레스 컨트롤러 요청 추이
> * 인그레스 컨트롤러 성공율 추이
> * 네트워크 I/O 추이
> * 평균 메모리 사용량 추이
> * 평균 CPU 사용량 추이

![\[&#xD654;&#xBA74;\] &#xC778;&#xADF8;&#xB808;&#xC2A4; &#xBAA8;&#xB2C8;&#xD130;&#xB9C1;](../.gitbook/assets/2020-10-20-1.59.46.png)

## ETCD 상태 확인 하기

통합대시보드의 ETCD 뷰에서 제공하는 상태 정보는 아래와 같습니다.

> * ETCD 리더 존재 여부
> * 최근 리더 변경 횟수
> * 최근 리더 변경 제안 실패 횟수
> * gRPC 성공율
> * DB 사용량
> * 동기화 시간
> * 클라이언트 트래픽 In/Out

![\[&#xD654;&#xBA74;\] ETCD &#xBAA8;&#xB2C8;&#xD130;&#xB9C1;](../.gitbook/assets/2020-10-20-2.01.43.png)

## 노드 상태 확인 하기

통합대시보드의 노드 뷰에서 제공하는 상태 정보는 아래와 같습니다.

> * 클러스터 CPU 사용 빈도
> * 클러스터 메모리 사용량
> * 클러스터 디스크 사용량
> * 클러스터 네트워크 사용량
> * 클러스터 업타임

![\[&#xD654;&#xBA74;\] &#xB178;&#xB4DC; &#xBAA8;&#xB2C8;&#xD130;&#xB9C1;](../.gitbook/assets/2020-10-20-2.04.18.png)

## 네임스페이스 상태 확인 하기

통합대시보드의 네임스페이스 뷰에서 제공하는 상태 정보는 아래와 같습니다.

> * 네임스페이스 서비스레벨 목표\(SLO\)율 추이
> * 네임스페이스 잔존 실패 허용 시간\(Error budget\)
> * 네임스페이스 총 Pod 수
> * 네임스페이스 생성 시간
> * 네임스페이스 사용 메모리 총량
> * 네임스페이스 안에 실행 중인 Pod 수

![\[&#xD654;&#xBA74;\] &#xB124;&#xC784;&#xC2A4;&#xD398;&#xC774;&#xC2A4; &#xBAA8;&#xB2C8;&#xD130;&#xB9C1;](../.gitbook/assets/2020-10-20-4.59.15.png)

## 알림/이벤트 이력 확인 하기

통합대시보드에서 모니터링하는 매트릭정보는 사용자 설정에 따라 대시보드, SMS, E-Mail 채널을 통해 전달되며 클러스터, 네임스페이스, 주요 자원 그룹 으로 필터링하여 조회할 수 있는 기능을 제공합니다.

대시보드에서는 발생한 이벤트를 한 시간단위로 조회하여 확인 할 수 있으며, 매 분 단위로 누적된 이벤트를 상세한 이벤트 설명을 포함하여 제공하므로, 이벤트 내용만으로 원인을 신속히 확인 할 수 있습니다.

각 이벤트는 심각도에 따라 5단계로 구분하여 표시되며, 사용자 설정에 따라 SMS 또는 E-Mail\(혹은 양쪽 모두\) 을 통해 실시간으로 알림을 전송합니다. 최근 발생한 이벤트와 알림은 필터 기능을 이용하여 조회 할 수 있으며, 사용자 설정에 따라 최대 1년까지 보관 가능합니다.

![\[&#xD654;&#xBA74;\] &#xC54C;&#xB78C; &#xBC0F; &#xC774;&#xBCA4;&#xD2B8;](../.gitbook/assets/2020-10-20-5.02.52.png)

