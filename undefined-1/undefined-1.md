# 설정 정보 관리

설정 정보로서 ConfigMap과 Secret 유형을 제공합니다.

## 어떤 유형의 설정 정보를 제공하나요?

* ConfigMap: ConfigMap은 컨테이너에 설정 데이터를 주입하기 위한 쿠버네티스 객체입니다.
* Secret: Secret은 암호, 토큰, 키 값 등 민감한 데이터를 포함하는 쿠버네티스 객체로서, 쿠버네티스에서는 Docker-registry, generic, tls 유형을 정의하고 있습니다. 칵테일 클라우드는 이 모든 유형을 지원합니다.

## 설정 정보 관리의 특장점은 무엇인가요?

### 설정 정보 설정 및 이용의 용이성

사용자가 설정 정보 관리 메뉴에서 Key-Value 형태로 사용할 설정 정보를 생성해 놓으면, 나중에 컨테이너 설정 시 선택 박스에서 간편하게 컨테이너에서 사용할 설정 정보를 선택할 수 있습니다.

## 태스크 목록

* ConfigMap 생성
* Secret 생성
* 설정 정보 조회
* 워크로드에서 설정 정보 사용

## 1. ConfigMap 생성

### 1.1 설정 정보 화면 접근

서비스 맵의 설정 정보 화면을 접근하여 우측 상단의 "+생성" 버튼을 클릭합니다. 이때, 컨피그 맵과 시크릿 중에서 컨피그 맵을 선택하도록 합니다.

![\[&#xD654;&#xBA74;\] &#xC11C;&#xBE44;&#xC2A4; &#xB9F5;&#xC758; &#xC124;&#xC815; &#xC815;&#xBCF4; &#xD654;&#xBA74; &#xC811;&#xADFC;](../.gitbook/assets/2020-10-14-6.43.41.png)

### 1.2 기본 정보 입력

컨피그 맵의 이름과 설명, 라벨과 주석 정보를 입력합니다. 이름 항목은 필수 입력 항목입니다.

![\[&#xD654;&#xBA74;\] &#xCEE8;&#xD53C;&#xADF8; &#xB9F5; &#xAE30;&#xBCF8; &#xC815;&#xBCF4; &#xC785;&#xB825;](../.gitbook/assets/2020-10-14-6.49.59.png)

### 1.3 키-값 정보 입력

컨피그 맵 정보 입력 화면에서 하단 데이터 섹션 우측의 "+" 버튼을 클릭하여 키-값 정보를 입력합니다. 해당 컨피그 맵에서 여러 개의 키-값 정보를 관리할 경우, 필요한 갯수 만큼 키-값 정보 입력 작업을 반복하면 됩니다.

![\[&#xD654;&#xBA74;\] &#xCEE8;&#xD53C;&#xADF8; &#xB9F5;&#xC758; &#xD0A4;-&#xAC12; &#xC815;&#xBCF4; &#xC785;&#xB825;](../.gitbook/assets/2020-10-14-6.51.54.png)

### 1.4 저장

컨피그 맵 정보 입력 후 이를 실제로 생성하기 위해서는 저장 버튼을 클릭합니다.

## 2. Secret 생성

서비스 맵의 설정 정보 화면을 접근하여 우측 상단의 "+생성" 버튼을 클릭합니다. 이때, 컨피그 맵과 시크릿 중에서 시크릿을 선택하도록 합니다.

### 2.1 기본 정보 입력

시크릿의 이름과 설명, 유형, 라벨과 주석 정보를 입력합니다. 이름 항목은 필수 입력 항목입니다. 시크릿 유형은 Generic, DockerRegistry, TLS 유형을 지원합니다. 유형의 경우 별도 입력이 없을 경우 Generic 유형으로 설정됩니다. 

![\[&#xD654;&#xBA74;\] &#xC2DC;&#xD06C;&#xB9BF; &#xAE30;&#xBCF8; &#xC815;&#xBCF4; &#xC785;&#xB825;](../.gitbook/assets/2020-10-14-7.05.22.png)

### 2.2 키-값 정보 입력

시크릿 정보 입력 화면에서 하단 데이터 섹션 우측의 "+" 버튼을 클릭하여 키-값 정보를 입력합니다. 해당 시크릿에서 여러 개의 키-값 정보를 관리할 경우, 필요한 갯수만큼 키-값 정보 입력 작업을 반복하면 됩니다.

![\[&#xD654;&#xBA74;\] &#xC2DC;&#xD06C;&#xB9BF;&#xC758; &#xD0A4;-&#xAC12; &#xC815;&#xBCF4; &#xC785;&#xB825;](../.gitbook/assets/2020-10-14-7.06.46.png)

### 2.3 저장

시크릿 정보 입력 후 이를 실제로 생성하기 위해서는 저장 버튼을 클릭합니다.

## 3. 설정 정보 조회

### 3.1 설정 정보 목록 조회

서비스 맵의 설정 정보 화면을 접근하여 생성된 설정 정보의 목록을 조회합니다.

![\[&#xD654;&#xBA74;\] &#xC124;&#xC815; &#xC815;&#xBCF4; &#xBAA9;&#xB85D; &#xC870;&#xD68C;](../.gitbook/assets/2020-10-14-7.10.01.png)

### 3.2 설정 정보 상세 정보 조회

설정 정보 목록에 표시된 컨피그 맵 혹은 시크릿 이름 링크를 클릭합니다. 선택한 설정 정보에 대한 상세 정보가 표시됩니다.

![\[&#xD654;&#xBA74;\] &#xC124;&#xC815; &#xC815;&#xBCF4;&#xC758; &#xC0C1;&#xC138; &#xC870;&#xD68C;](../.gitbook/assets/2020-10-14-7.10.59.png)

설정 정보의 상세 정보를 YAML 형식으로 조회할 수도 있습니다. 상기 화면 우측 상단의 설정 버튼을 클릭한 후 표시되는 화면에서 죄측 상단의 설정 보기를 "YAML 보기"로 선택하면 YAML 형식의 정보가 표시됩니다.

![\[&#xD654;&#xBA74;\] &#xC124;&#xC815; &#xC815;&#xBCF4;&#xC758; YAML &#xD3EC;&#xB9F7; &#xC870;&#xD68C; ](../.gitbook/assets/2020-10-14-7.11.45.png)

## 4. 워크로드에서 설정 정보 사용

서비스 맵 화면에서 설정 정보를 사용할 워크로드의 이름을 클릭하면, 워크로드의 상세 화면이 표시됩니다. 워크로드 관련 설정을 하기 위해서는 상단 우측의 "설정" 버튼을 클릭합니다. 워크로드 상세 설정 화면이 표시됩니다.

기존 동작 중인 워크로드에서 설정 정보를 사용하려고 하거나 새로 정의하고 있는 워크로드에서 설정 정보를 사용하려고 하거나 설정 방법은 동일합니다.

![\[&#xD654;&#xBA74;\] &#xC6CC;&#xD06C;&#xB85C;&#xB4DC; &#xC0C1;&#xC138; &#xC124;&#xC815; &#xD654;&#xBA74;](../.gitbook/assets/2020-10-14-7.14.15.png)

### 4.1 컨테이너에서 환경 변수 설정

컨피그 맵 값이나 시크릿 값을 사용할 컨테이너의 이름을 클릭하면, 컨테이너 관련 정보를 설정할 수 있는 화면이 나타납니다. 환경 변수 메뉴를 선택합니다.

![\[&#xD654;&#xBA74;\] &#xCEE8;&#xD14C;&#xC774;&#xB108; &#xD658;&#xACBD; &#xBCC0;&#xC218; &#xC124;&#xC815; &#xD654;&#xBA74;](../.gitbook/assets/2020-10-14-7.17.08.png)

컨테이너 환경 변수 설정 화면에서 사용하려고 하는 설정 정보의 유형을 선택합니다. 컨피그 맵 값을 선택하거나 시크릿 값을 선택하였을 경우, 간단하게 사용하려는 설정 정보 리소스 및 설정 정보 리소스가 포함하는 키 값을 선택할 수 있습니다. 컨테이너에서 선택한 설정 정보 키-값을 접근할 환경 변수 키 값을 별도로 입력한 후, "적용" 버튼을 클릭합니다.

![\[&#xD654;&#xBA74;\] &#xC124;&#xC815; &#xC815;&#xBCF4; &#xC120;&#xD0DD; &#xBC0F; &#xD658;&#xACBD; &#xBCC0;&#xC218; &#xD0A4; &#xAC12; &#xC785;&#xB825;](../.gitbook/assets/2020-10-14-7.39.29.png)

### 4.2 워크로드 재시작

환경 변수가 효력을 발휘하기 위해서는 컨테이너의 재시작이 필요합니다. 워크로드 상세 설정 화면 상단 우측의 "저장 후 시작" 버튼을 클릭하여 재기동시킵니다.

### 4.3 환경 변수 적용 확인

워크로드 상세 배포정보 조회 화면에서 환경 변수를 적용한 컨테이너를 찾은 후, 오른쪽 터미널 아이콘을 클릭합니다. 터미널 아이콘을 클릭하면 해당 컨테이너에 대한 대화형 쉘이 화면에 표시됩니다. 대화면 쉘에서 env 명령어를 표시하여, 환경 변수의 내용이 올바르게 설정되어 있는지 확인합니다.



 



