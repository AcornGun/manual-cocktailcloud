# 클러스터 등록

클러스터는 클라우드 네이티브 어플리케이션이 배포/실행되는 인프라 입니다. 따라서 칵테일 클라우드를 처음 시작 할 때 반드시 등록하여야 합니다.

칵테일 클라우드는 물리, 가상화 인프라부터 퍼블릭 클라우드까지 다양한 유형의 클러스터를 등록하여 통합 관리 할 수 있습니다. 여기서는 설명을 위해 구글\(Google\) 클라우드의 GKE\(Google Kubernetes Engine\)을 예로 들겠습니다. GKE는 OAuth인증 방식을 지원하여 클러스터 등록과정이 간편합니다. 

## 1. GKE 클러스터 생성

GKE 클러스터를 생성하는 과정은 해당 사용 설명서를 참고 합니다. 만약 구글 사용자 등록을 하지 않았다면, 먼저 사용자 등록을 하여야 합니다. 등록한 사용자는 이 후 칵테일 클라우드에서 클러스터 등록 시 사용 됩니다.

### GKE 사용자 설명서

{% embed url="https://cloud.google.com/kubernetes-engine/docs" %}

## 2. 클러스터 등록

생성된 GKE 클러스터를 다음 절치에 따라 칵테일 클라우드에 등록 합니다.

### 2.1 클러스터 등록 화면으로 이동

1\) ⓦ 플랫폼 관리 &gt; ←클러스터 &gt; 〓 \(클러스터 등록 버튼 선택\)

### 2.2 클러스터 유형 선택 과 인증

![\[&#xD654;&#xBA74;\] &#xD074;&#xB7EC;&#xC2A4;&#xD130; &#xC124;&#xC815; &#xD3FC;](../.gitbook/assets/2020-10-12-4.26.19.png)

1\) 클러스터 설정 폼의 프로바이더 속성을 'Google Cloud Platform'으로 선택 합니다.

2\) 유형 속성을 'GKE'로 선택 합니다.

3\) 위 두가지 속성을 선택하면 클러스터 설정 폼에 인증 속성이 표시됩니다.

4\) 인증 버튼을 누르면 구글의 인층 창이 뜨고, 이 곳에 구글 계정을 입력 합니다. 

* 이 계정은 등록 할 GKE 클러스터를 생성 할 때 사용한 계정이어야 합니다.

### 2.3 클러스터 등록

![\[&#xD654;&#xBA74;\] &#xC778;&#xC99D; &#xD6C4; &#xD074;&#xB7EC;&#xC2A4;&#xD130; &#xC124;&#xC815; &#xD3FC;](../.gitbook/assets/2020-10-12-4.43.39.png)

1\) 인증이 완료 되면 인증 속성에 '인증 완료'가 표시됩니다.

2\) 프로젝트 아이디 속성에서 구글 클라우드의 프로젝트 아이디를 선택합니다. 

* 프로젝트 아이디는 등록하려는 GKE 클러스터가 생성된 프로젝트 이어야합니다.

3\) 클러스터 속성에서 등록할 GKE 클러스터를 선택합니다.

4\) 러스터 이름 속성에 칵테일 클라우드에서 관리할 클러스터 이름을 입력합니다.

* 아이디는 영문 소문자, 숫자, 특수문자 3가지\(- . \_\)만 가능합니다.\(예: gke-demo-cluster\)
* 또한 이미 등록된 다른 클러스터의 이름과 중복되지 않아야 합니다.

5\) 아이디 속성에 클러스터의 아이디를 입력합니다. 

6\) 클러스터 등록을 위해 메뉴 바에서 '저장' 버튼을 선택합니다.

* 참고로, 입력하지 않은  나머지 속성은 클러스터 등록 후 GKE 클러스터의 정보를 통해 자동 입력됩니다. 

7\) 등록이 완료 되면 클러스터 목록이 출력됩니다. 이 곳에서 방금 등록 했던 클러스터를 확인 할 수 있습니다.

## 3. 다음 과정

다음 과정은 등록 한 클러스터에 어플리케이션을 배포하기 위하여, 작업 공간을 만듭니다. '[워크스페이스 만들기](https://app.gitbook.com/@cocktailcloud/s/cocktail-cloud-kr/~/drafts/-MGGsEvBJO3rQKw2ezdd/undefined-2/undefined-1) ' 페이지로 이동 하세요.

